<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hadoop概述及分布式集群容器化部署 | Keep Running</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.png">
    <script charset="utf-8" async="async" src="/js/jquery.min.js"></script>
    <script charset="utf-8" async="async" src="/js/global.js"></script>
    <script charset="utf-8" async="async" src="/js/fingerprint2.min.js"></script>
    <meta name="description" content="">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <link rel="preload" href="/assets/css/0.styles.42b858ce.css" as="style"><link rel="preload" href="/assets/js/app.cfd60917.js" as="script"><link rel="preload" href="/assets/js/4.8234885e.js" as="script"><link rel="preload" href="/assets/js/3.1429892b.js" as="script"><link rel="preload" href="/assets/js/19.c00af7cb.js" as="script"><link rel="prefetch" href="/assets/js/10.0f0de338.js"><link rel="prefetch" href="/assets/js/11.0c47d372.js"><link rel="prefetch" href="/assets/js/12.b45ce082.js"><link rel="prefetch" href="/assets/js/13.f2032214.js"><link rel="prefetch" href="/assets/js/14.0a8927b2.js"><link rel="prefetch" href="/assets/js/15.9ab1d206.js"><link rel="prefetch" href="/assets/js/16.f03f2e40.js"><link rel="prefetch" href="/assets/js/17.c6bbe2be.js"><link rel="prefetch" href="/assets/js/18.e08bb862.js"><link rel="prefetch" href="/assets/js/20.35396483.js"><link rel="prefetch" href="/assets/js/21.fe05d239.js"><link rel="prefetch" href="/assets/js/22.80eaa289.js"><link rel="prefetch" href="/assets/js/23.bce5e854.js"><link rel="prefetch" href="/assets/js/24.fa104861.js"><link rel="prefetch" href="/assets/js/25.2c725be9.js"><link rel="prefetch" href="/assets/js/26.fc7addb7.js"><link rel="prefetch" href="/assets/js/27.fc831a66.js"><link rel="prefetch" href="/assets/js/28.3784f580.js"><link rel="prefetch" href="/assets/js/29.7e78aa5c.js"><link rel="prefetch" href="/assets/js/30.b074fddd.js"><link rel="prefetch" href="/assets/js/31.059ebf27.js"><link rel="prefetch" href="/assets/js/32.12570018.js"><link rel="prefetch" href="/assets/js/33.d0dc971f.js"><link rel="prefetch" href="/assets/js/34.c9b46696.js"><link rel="prefetch" href="/assets/js/35.77a81c6a.js"><link rel="prefetch" href="/assets/js/36.6048e328.js"><link rel="prefetch" href="/assets/js/37.b9f285de.js"><link rel="prefetch" href="/assets/js/38.ac5a2abf.js"><link rel="prefetch" href="/assets/js/39.97ca52cb.js"><link rel="prefetch" href="/assets/js/40.1689d33f.js"><link rel="prefetch" href="/assets/js/41.4d2d8182.js"><link rel="prefetch" href="/assets/js/42.8647a8ff.js"><link rel="prefetch" href="/assets/js/43.f867a280.js"><link rel="prefetch" href="/assets/js/44.a51272ee.js"><link rel="prefetch" href="/assets/js/45.c31e6474.js"><link rel="prefetch" href="/assets/js/46.fe85ae54.js"><link rel="prefetch" href="/assets/js/47.dc8a97d4.js"><link rel="prefetch" href="/assets/js/48.c97f7726.js"><link rel="prefetch" href="/assets/js/49.ac219d14.js"><link rel="prefetch" href="/assets/js/5.963fada3.js"><link rel="prefetch" href="/assets/js/50.926ecfa5.js"><link rel="prefetch" href="/assets/js/51.e776b5b1.js"><link rel="prefetch" href="/assets/js/52.4938314c.js"><link rel="prefetch" href="/assets/js/53.6b4d7266.js"><link rel="prefetch" href="/assets/js/54.bfaf622b.js"><link rel="prefetch" href="/assets/js/55.c6d160b9.js"><link rel="prefetch" href="/assets/js/56.31f6843c.js"><link rel="prefetch" href="/assets/js/57.55cbf7b8.js"><link rel="prefetch" href="/assets/js/58.8174871d.js"><link rel="prefetch" href="/assets/js/59.3eee2bde.js"><link rel="prefetch" href="/assets/js/6.b2e36a75.js"><link rel="prefetch" href="/assets/js/60.233a32ed.js"><link rel="prefetch" href="/assets/js/61.defb83ac.js"><link rel="prefetch" href="/assets/js/62.442070cd.js"><link rel="prefetch" href="/assets/js/63.cc121456.js"><link rel="prefetch" href="/assets/js/64.c8f83f5d.js"><link rel="prefetch" href="/assets/js/65.b9bc8c1c.js"><link rel="prefetch" href="/assets/js/7.fb6689bf.js"><link rel="prefetch" href="/assets/js/8.e390cc6b.js"><link rel="prefetch" href="/assets/js/9.c03c9dfe.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.db8a86c9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.42b858ce.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Keep Running</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/kr/java/jvm/自动内存管理.html" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/kr/database/database.html" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/kr/spring/MVC-IOC-AOP.html" class="nav-link">
  Spring
</a></div><div class="nav-item"><a href="/kr/middleware/redis/redis-base.html" class="nav-link">
  Redis/Zookeeper/Kafka
</a></div><div class="nav-item"><a href="/kr/bigdata/hadoop/Hadoop-分布式集群容器部署.html" class="nav-link">
  大数据
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/kr/java/jvm/自动内存管理.html" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/kr/database/database.html" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/kr/spring/MVC-IOC-AOP.html" class="nav-link">
  Spring
</a></div><div class="nav-item"><a href="/kr/middleware/redis/redis-base.html" class="nav-link">
  Redis/Zookeeper/Kafka
</a></div><div class="nav-item"><a href="/kr/bigdata/hadoop/Hadoop-分布式集群容器部署.html" class="nav-link">
  大数据
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Hadoop</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/kr/bigdata/hadoop/Hadoop-分布式集群容器部署.html" class="active sidebar-link">Hadoop概述及分布式集群容器化部署</a></li><li><a href="/kr/bigdata/hadoop/分布式文件系统-HDFS-体系架构及原理.html" class="sidebar-link">分布式文件系统 HDFS 体系架构及原理</a></li><li><a href="/kr/bigdata/hadoop/分布式并行计算-MapReduce-概述及原理.html" class="sidebar-link">分布式并行计算 MapReduce 概述及原理</a></li><li><a href="/kr/bigdata/hadoop/集群资源管理与调度平台-YARN-概述及原理.html" class="sidebar-link">集群资源管理与调度平台 YARN 概述及原理</a></li><li><a href="/kr/bigdata/hadoop/MapReduce-实例-WordCount.html" class="sidebar-link">MapReduce 经典案例：WordCount</a></li><li><a href="/kr/bigdata/hadoop/HDFS-3-X-纠删码.html" class="sidebar-link">HDFS 3.X 纠删码</a></li><li><a href="/kr/bigdata/hadoop/大数据生态圈与离线实时数据平台实践.html" class="sidebar-link">大数据生态圈与离线实时数据平台实践</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Hive</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/kr/bigdata/hive/分布式数据仓库-Hive.html" class="sidebar-link">分布式数据仓库 Hive</a></li><li><a href="/kr/bigdata/hive/Hive-SQL.html" class="sidebar-link">Hive SQL 执行计划|数据倾斜|性能优化</a></li><li><a href="/kr/bigdata/hive/HiveSQL-编译过程.html" class="sidebar-link">Hive 工作原理：Hive SQL 编译过程</a></li><li><a href="/kr/bigdata/hive/Hive-function.html" class="sidebar-link">Hive Function</a></li><li><a href="/kr/bigdata/hive/Hive-SQL-Examples.html" class="sidebar-link">Hive SQL Examples</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Spark</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/kr/bigdata/spark/Spark-概述与集群部署模式.html" class="sidebar-link">Spark 概述与集群部署模式</a></li><li><a href="/kr/bigdata/spark/Spark-RDD-弹性分布式数据集.html" class="sidebar-link">Spark RDD 弹性分布式数据集</a></li><li><a href="/kr/bigdata/spark/Spark-运行架构.html" class="sidebar-link">Spark 运行架构及作业提交流程</a></li><li><a href="/kr/bigdata/spark/Spark-Streaming.html" class="sidebar-link">Spark Streaming</a></li><li><a href="/kr/bigdata/spark/Spark-sql.html" class="sidebar-link">Spark SQL</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Other</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/kr/bigdata/Canal-MySQL-binlog-增量订阅与消费组件.html" class="sidebar-link">Canal：MySQL Binlog 增量订阅与消费组件</a></li><li><a href="/kr/bigdata/Sqoop-数据迁移工具.html" class="sidebar-link">Sqoop 数据迁移工具</a></li><li><a href="/kr/bigdata/Flume-基本架构及应用场景.html" class="sidebar-link">Flume 基本架构及应用场景</a></li><li><a href="/kr/bigdata/Azkaban-编译镜像及基本使用.html" class="sidebar-link">Azkaban 编译镜像及基本使用</a></li><li><a href="/kr/bigdata/Maxwell.html" class="sidebar-link">Maxwell</a></li><li><a href="/kr/bigdata/Elaticsearch.html" class="sidebar-link">Elaticsearch</a></li><li><a href="/kr/bigdata/大数据可视化交互平台-Hue.html" class="sidebar-link">大数据可视化交互平台 Hue</a></li></ul></section></li></ul> </aside> <div><main class="page"> <div class="theme-default-content content__default"><h1 id="hadoop-概述及分布式集群容器化部署"><a href="#hadoop-概述及分布式集群容器化部署" class="header-anchor">#</a> Hadoop 概述及分布式集群容器化部署</h1> <p>Hadoop 是由 Apache 软件基金会开发的分布式系统基础架构，一个用于海量数据的分布式存储与分布式计算的大数据生态圈，本文简述 Apache Hadoop 及 Cloudrea Hadoop（CDH）分布式集群的容器化部署</p> <h2 id="大数据定义"><a href="#大数据定义" class="header-anchor">#</a> 大数据定义</h2> <p>麦肯锡全球研究所：一种规模大到在获取、存储、管理、分析方面大大超出传统数据库软件工具能力范围的数据集合，具有海量的数据规模、快速的数据流转、多样的数据类型和价值密度低四大特征。</p> <p>IBM 公司：大数据具有5V特点：Volume（大量）、Velocity（高速）、Variety（多样）、Value（价值）、Veracity（真实性）。</p> <h2 id="hadoop-概述"><a href="#hadoop-概述" class="header-anchor">#</a> Hadoop 概述</h2> <p>Hadoop 是由 Apache 软件基金会开发的分布式系统基础架构，一个用于海量数据的分布式存储与分布式计算的大数据生态圈，优点：</p> <ul><li>高可靠性：维护多个工作数据副本，确保能够针对失败的节点重新分布处理</li> <li>高扩展性：集群可以方便地扩展到数以千计的节点中</li> <li>高效性：在节点之间动态地移动数据，并保证各个节点的动态平衡，以并行的方式工作，通过并行处理加快处理速度</li> <li>高容错性：自动保存数据的多个副本，并且能够自动将失败的任务重新分配</li> <li>低成本：与一体机、商用数据仓库以及 QlikView、 Yonghong Z- Suites 等数据集市相比，Hadoop 是开源的，项目的软件成本因此会大大降低</li></ul> <p>像 HBase、Hive 等不过是在以下基础模块上的高级抽象：</p> <ul><li>Common：支持其他模块的公用工具包，提供了操作文件系统、I/O、序列化和远程方法调用等</li> <li>HDFS：是可扩展、容错、高性能、高吞吐的分布式文件系统，异步复制，一次写入多次读取，主要负责分布式存储</li> <li>MapReduce：基于 YARN 的分布式计算框架，包含 Map(映射)和 Reduce(归约)过程，负责在 HDFS 上进行计算</li> <li>YARN：负责集群资源的管理和任务调度</li></ul> <h2 id="hadoop-1-x-2-x-3-x"><a href="#hadoop-1-x-2-x-3-x" class="header-anchor">#</a> Hadoop 1.x/2.x/3.x</h2> <p><img src="/images/kr/bigdata/hadoop/Hadoop1.x-2.x.png" alt="Hadoop1.x-2.x"></p> <p><big><font color="#9f79ee"><em><strong>Hadoop 1.x</strong></em></font></big></p> <ul><li>HDFS：分布式文件系统</li> <li>MapReduce：分布式计算引擎，资源管理平台
<ul><li>JobTracker：负责集群资源的管理、任务调度以及跟踪任务的状态；</li> <li>TaskTracker：负责任务的执行与周期性地汇报本节点的资源使用情况和任务进度。</li></ul></li></ul> <p><big><font color="#9f79ee"><em><strong>Hadoop 2.x</strong></em></font></big></p> <ul><li>HDFS：整体架构与 1.x 一致，新增特性：HA、Federation</li> <li>MapReduce：从 1.x 中的 MapReduce 分离出的分布式计算引擎</li> <li>YARN：从 1.x 中的 MapReduce 分离出的资源管理平台，支持更多计算引擎</li></ul> <p><big><font color="#9f79ee"><em><strong>Hadoop 3.x</strong></em></font></big></p> <p>整体架构不变，提供了更高的性能、更强的容错能力以及更高效的数据处理能力，细节优化（新特性）：</p> <ul><li>Java 版本改为8以上</li> <li>HDFS 支持纠删码</li> <li>HDFS 支持多 NameNode</li> <li>MapReduce 任务级本地优化</li> <li>多重服务默认端口更改</li> <li>用 Intra 解决 DataNode 宕机负载不均衡的问题</li> <li>支持 Microsoft Azure Data Lake 文件系统</li> <li>解决了 AMAZON S3 的数据一致性问题</li></ul> <h2 id="cloudrea-hadoop-cdh"><a href="#cloudrea-hadoop-cdh" class="header-anchor">#</a> Cloudrea Hadoop（CDH）</h2> <p><big><font color="#9f79ee"><em><strong>CDH</strong></em></font></big> 是 Cloudera 的一个拥有集群自动化安装、中心化管理、集群监控、报警功能的 Hadoop 发行版，完全开源，比 Apache Hadoop 在兼容性，安全性，稳定性上有所增强。支持 Yum 包、tar 包、RPM 包、Cloudera Manager 四种安装方式。</p> <p><img src="/images/kr/bigdata/hadoop/CDH-%E6%9E%B6%E6%9E%84.jpg" alt="CDH-架构">
Cloudera Manager 功能：</p> <ul><li>管理：对集群进行管理，例如添加、删除节点等操作</li> <li>监控：监控集群的健康情况，对设置的各种指标和系统的具体运行情况进行全面的监控</li> <li>诊断：对集群出现的各种问题进行诊断，并且给出建议和解决方案</li> <li>集成：多组件可以进行版本兼容间的整合</li></ul> <h2 id="hadoop-生态圈"><a href="#hadoop-生态圈" class="header-anchor">#</a> Hadoop 生态圈</h2> <p><img src="/images/kr/bigdata/hadoop/Hadoop%E7%94%9F%E6%80%81%E5%9C%88.jpg" alt="Hadoop生态圈"></p> <h1 id="hadoop-分布式集群"><a href="#hadoop-分布式集群" class="header-anchor">#</a> Hadoop 分布式集群</h1> <h2 id="ssh-远程登录"><a href="#ssh-远程登录" class="header-anchor">#</a> SSH 远程登录</h2> <blockquote><p>SSH 相关知识点教程：<a href="https://gitee.com/mirrors_trending/ssh-tutorial/tree/main" target="_blank" rel="noopener noreferrer">ssh-tutorial<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 登录格式</span>
<span class="token comment"># -p：端口号、user：登录用户名、host：登录主机、默认端口号为22，当端口号为22时，可以省略</span>
<span class="token function">ssh</span> -p <span class="token number">22</span> user@host
<span class="token comment"># 查看 Linux 是否启用 SSH</span>
<span class="token function">netstat</span> -ntlp <span class="token operator">|</span> <span class="token function">grep</span> <span class="token function">ssh</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="ssh-远程密码登录"><a href="#ssh-远程密码登录" class="header-anchor">#</a> SSH 远程密码登录</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>xuzixian@LAPTOP-6NUV36V7 MINGW64 /g/Users/xzx-linux
$ <span class="token function">ssh</span> -p <span class="token number">22</span> xzx@192.168.120.159
The authenticity of <span class="token function">host</span> <span class="token string">'192.168.120.159 (192.168.120.159)'</span> can<span class="token string">'t be established.
ECDSA key fingerprint is SHA256:dgB46Zy110CFg99bnQErfKeU59ST5jzkcUrQLK4MGLQ.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '</span><span class="token number">192.168</span>.120.159<span class="token string">' (ECDSA) to the list of known hosts.
xzx@192.168.120.159'</span>s password:
Last login: Fri Jun <span class="token number">11</span> 06:43:56 <span class="token number">2021</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="ssh-远程免密登录-公钥登录"><a href="#ssh-远程免密登录-公钥登录" class="header-anchor">#</a> SSH 远程免密登录（公钥登录）</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 生成本机密钥对，-t 表示加密算法选项，这里采用rsa加密算法</span>
xuzixian@LAPTOP-6NUV36V7 MINGW64 /g/Users/xzx-linux
$ ssh-keygen -t rsa
<span class="token comment"># 公钥复制到远程主机</span>
xuzixian@LAPTOP-6NUV36V7 MINGW64 /g/Users/xzx-linux
$ ssh-copy-id xzx@192.168.120.159
<span class="token comment"># 远程登录并查看公钥</span>
xuzixian@LAPTOP-6NUV36V7 MINGW64 /g/Users/xzx-linux
$ <span class="token function">ssh</span> -p <span class="token number">22</span> xzx@192.168.120.159
Last login: Sun Jun <span class="token number">13</span> 06:37:51 <span class="token number">2021</span> from <span class="token number">192.168</span>.120.1
<span class="token punctuation">[</span>xzx@xzx ~<span class="token punctuation">]</span>$ ll .ssh/authorized_keys
-rw-------. <span class="token number">1</span> xzx xzx <span class="token number">578</span> Jun <span class="token number">12</span> <span class="token number">22</span>:48 .ssh/authorized_keys
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="hadoop-安装模式"><a href="#hadoop-安装模式" class="header-anchor">#</a> Hadoop 安装模式</h2> <ul><li>单机模式：不能使用 HDFS，只能使用 MapReduce，所以单机模式主要用于测试 MR 程序</li> <li>伪分布式模式：用多个线程模拟真实多台服务器，即模拟真实的完全分布式环境</li> <li>完全分布式模式：用多台机器（或启动多个虚拟机）来完成部署集群</li></ul> <h2 id="hadoop-集群节点"><a href="#hadoop-集群节点" class="header-anchor">#</a> Hadoop 集群节点</h2> <p><img src="/images/kr/bigdata/hadoop/Hadoop-%E9%9B%86%E7%BE%A4%E8%8A%82%E7%82%B9.bmp" alt="Hadoop-集群节点"></p> <ul><li>HDFS 服务的进程：NameNode、SecondaryNameNode、DataNode</li> <li>YARN 服务的进程：ResourceManager、NodeManager</li> <li>MapRedcue 计算框架没有进程，MapReduce 程序可以在上面进程上调度执行</li></ul> <h2 id="分布式集群容器化部署"><a href="#分布式集群容器化部署" class="header-anchor">#</a> 分布式集群容器化部署</h2> <p>准备 JDK 和 Hadoop 安装包：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 上传本地 JDK 到 Linux 服务器</span>
xuzixian@LAPTOP-6NUV36V7 MINGW64 /g/Users/fouxian
$ <span class="token function">scp</span> -r E:/downloads/BaiduNetdiskDownload/jdk-8u271-linux-x64.tar.gz xzx@192.168.120.159:/home/xzx/Work/hadoop-docker
<span class="token comment"># 网络下载 Hadoop 至 Linux 服务器</span>
<span class="token punctuation">[</span>xzx@xzx hadoop-docker<span class="token punctuation">]</span>$ <span class="token function">wget</span> https://mirrors.bfsu.edu.cn/apache/hadoop/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="镜像构建"><a href="#镜像构建" class="header-anchor">#</a> 镜像构建</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>xzx@xzx ssh-centos7<span class="token punctuation">]</span>$ <span class="token function">docker</span> build -t <span class="token string">'xzx/ssh-centos7'</span> <span class="token builtin class-name">.</span>          <span class="token comment"># 构建镜像 SSH </span>
<span class="token punctuation">[</span>xzx@xzx xzx-jdk<span class="token punctuation">]</span>$ <span class="token function">docker</span> build -t <span class="token string">'xzx/jdk1.8'</span> <span class="token builtin class-name">.</span>                   <span class="token comment"># 构建镜像 JDK</span>
<span class="token punctuation">[</span>xzx@xzx xzx-hadoop-cluster<span class="token punctuation">]</span>$ <span class="token function">docker</span> build -t <span class="token string">'xzx/hadoop-3.2.2'</span> <span class="token builtin class-name">.</span>  <span class="token comment"># 构建镜像 Hadoop</span>
<span class="token punctuation">[</span>xzx@xzx xzx-hadoop-cluster<span class="token punctuation">]</span>$ <span class="token function">docker</span> images
REPOSITORY               TAG                 IMAGE ID            CREATED             SIZE
xzx/hadoop-3.2.2         latest              8e069c860f5f        <span class="token number">3</span> days ago          <span class="token number">1</span>.61GB
xzx/jdk-1.8              latest              dfa006cb7137        <span class="token number">3</span> days ago          690MB
xzx/ssh-centos7          latest              d3ae896e3ba1        <span class="token number">3</span> days ago          334MB
centos                   <span class="token number">7</span>                   8652b9f0cb4c        <span class="token number">7</span> months ago        204MB
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="集群搭建"><a href="#集群搭建" class="header-anchor">#</a> 集群搭建</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>xzx@xzx xzx-hadoop-cluster<span class="token punctuation">]</span>$ ll
total <span class="token number">386212</span>
-rwxrw-r--. <span class="token number">1</span> xzx xzx       <span class="token number">243</span> Jun <span class="token number">19</span> <span class="token number">18</span>:20 build-image.sh             <span class="token comment"># 构建镜像脚本</span>
-rwxrw-r--. <span class="token number">1</span> xzx xzx       <span class="token number">380</span> Jun <span class="token number">19</span> <span class="token number">18</span>:04 clean-container.sh         <span class="token comment"># 清除容器脚本</span>
drwxrwxr-x. <span class="token number">2</span> xzx xzx       <span class="token number">154</span> Jun <span class="token number">19</span> <span class="token number">19</span>:38 config                     <span class="token comment"># Hadoop 配置文件</span>
-rw-rw-r--. <span class="token number">1</span> xzx xzx      <span class="token number">1897</span> Jun <span class="token number">19</span> <span class="token number">19</span>:40 Dockerfile                 <span class="token comment"># Hadoop Dockerfile</span>
-rw-rw-r--. <span class="token number">1</span> xzx xzx <span class="token number">395448622</span> Jan <span class="token number">14</span> 02:48 hadoop-3.2.2.tar.gz
-rwxrw-r--. <span class="token number">1</span> xzx xzx       <span class="token number">759</span> Jun <span class="token number">19</span> <span class="token number">19</span>:51 resize-cluster.sh          <span class="token comment"># 重置集群节点数</span>
-rwxrw-r--. <span class="token number">1</span> xzx xzx      <span class="token number">1090</span> Jun <span class="token number">19</span> <span class="token number">18</span>:27 restart-container.sh       <span class="token comment"># 重启容器脚本</span>
drwxrwxr-x. <span class="token number">2</span> xzx xzx        <span class="token number">54</span> Jun <span class="token number">19</span> <span class="token number">18</span>:05 script                     <span class="token comment"># Hadoop 启动脚本</span>
-rwxrw-r--. <span class="token number">1</span> xzx xzx      <span class="token number">2213</span> Jun <span class="token number">19</span> <span class="token number">17</span>:43 start-container.sh         <span class="token comment"># 启动容器脚本</span>
-rwxrw-r--. <span class="token number">1</span> xzx xzx       <span class="token number">370</span> Jun <span class="token number">19</span> <span class="token number">18</span>:02 stop-container.sh          <span class="token comment"># 停止容器脚本</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="创建网桥"><a href="#创建网桥" class="header-anchor">#</a> 创建网桥</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 用于 Hadoop 集群节点间的通信，通过网桥固定各容器 IP 地址</span>
<span class="token punctuation">[</span>xzx@xzx xzx-hadoop-cluster<span class="token punctuation">]</span>$ <span class="token function">docker</span> network create --driver<span class="token operator">=</span>bridge xzx-hadoop-bridge
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="hadoop-配置"><a href="#hadoop-配置" class="header-anchor">#</a> Hadoop 配置</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>xzx@xzx config<span class="token punctuation">]</span>$ <span class="token function">vim</span> hadoop-env.sh
<span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/local/jdk1.8.0_271
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_LOG_DIR</span><span class="token operator">=</span>/usr/local/data/hadoop/logs
<span class="token punctuation">[</span>xzx@xzx config<span class="token punctuation">]</span>$ <span class="token function">vim</span> core-site.xml
<span class="token operator">&lt;</span>configuration<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">!</span>-- HDFS 默认访问路径，api 接口 --<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>fs.defaultFS<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>hdfs://xzx-hadoop-master:9000/<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">!</span>-- Hadoop 运行时产生的临时数据文件的存储位置 --<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>hadoop.tmp.dir<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>file:/usr/local/data/hadoop/tmp<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>Abase <span class="token keyword">for</span> other temporary directories.<span class="token operator">&lt;</span>/description<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/configuration<span class="token operator">&gt;</span>
<span class="token punctuation">[</span>xzx@xzx config<span class="token punctuation">]</span>$ <span class="token function">vim</span> hdfs-site.xml
<span class="token operator">&lt;</span>configuration<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span>-- 设置 namende 数据存放点 --<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.namenode.name.dir<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>file:/usr/local/data/hadoop/namenode<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span>-- 设置 datanode 数据存放点 --<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.datanode.data.dir<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>file:/usr/local/data/hadoop/datanode<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span>-- 设置副本个数 --<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.replication<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>/value<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/configuration<span class="token operator">&gt;</span>
<span class="token punctuation">[</span>xzx@xzx config<span class="token punctuation">]</span>$ <span class="token function">vim</span> mapred-site.xml
<span class="token operator">&lt;</span>configuration<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span>-- 设置 mapreduce 的运行平台为 <span class="token function">yarn</span> --<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>mapreduce.framework.name<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>yarn<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/configuration<span class="token operator">&gt;</span>
<span class="token punctuation">[</span>xzx@xzx config<span class="token punctuation">]</span>$ <span class="token function">vim</span> yarn-site.xml
<span class="token operator">&lt;</span>configuration<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span>-- reducer 获取数据的方式 --<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn.nodemanager.aux-services<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>mapreduce_shuffle<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span>-- 指定 <span class="token function">yarn</span> 的老大的地址 --<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn.resourcemanager.hostname<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>xzx-hadoop-master<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/configuration<span class="token operator">&gt;</span>
<span class="token punctuation">[</span>xzx@xzx config<span class="token punctuation">]</span>$ <span class="token function">vim</span> workers
xzx-hadoop-slave-1
xzx-hadoop-slave-2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><h4 id="容器启动"><a href="#容器启动" class="header-anchor">#</a> 容器启动</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>xzx@xzx xzx-hadoop-cluster<span class="token punctuation">]</span>$ ./start-container.sh  <span class="token comment"># 默认一主两从</span>
<span class="token comment"># 启动的三个容器</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                                                    NAMES
d9e31c58d8dc        xzx/hadoop-3.2.2    <span class="token string">&quot;/bin/bash&quot;</span>         <span class="token number">2</span> minutes ago       Up <span class="token number">2</span> minutes        <span class="token number">0.0</span>.0.0:32958-<span class="token operator">&gt;</span><span class="token number">22</span>/tcp                                    xzx-hadoop-slave-2
0f0bdc1f3070        xzx/hadoop-3.2.2    <span class="token string">&quot;/bin/bash&quot;</span>         <span class="token number">2</span> minutes ago       Up <span class="token number">2</span> minutes        <span class="token number">0.0</span>.0.0:32957-<span class="token operator">&gt;</span><span class="token number">22</span>/tcp                                    xzx-hadoop-slave-1
aba464a6a09e        xzx/hadoop-3.2.2    <span class="token string">&quot;/bin/bash&quot;</span>         <span class="token number">2</span> minutes ago       Up <span class="token number">2</span> minutes        <span class="token number">0.0</span>.0.0:9868-<span class="token operator">&gt;</span><span class="token number">9868</span>/tcp, <span class="token number">22</span>/tcp, <span class="token number">0.0</span>.0.0:9870-<span class="token operator">&gt;</span><span class="token number">9870</span>/tcp   xzx-hadoop-master
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>访问 http://192.168.120.159:9870，http://192.168.120.159:8088</p> <p><img src="/images/kr/bigdata/hadoop/NameNode-UI.png" alt="NameNode-UI"></p> <p><img src="/images/kr/bigdata/hadoop/Yarn-UI.png" alt="Yarn-UI"></p> <blockquote><p>存在问题：resourcemanager 进程启动后又挂掉了，直接通过 docker exec 执行 start-yarn.sh 时，始终无法启动进程 resourcemanager，只有进行容器中才能启动成功</p></blockquote> <h4 id="集群节点重置"><a href="#集群节点重置" class="header-anchor">#</a> 集群节点重置</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>xzx@xzx xzx-hadoop-cluster<span class="token punctuation">]</span>$ ./resize-cluster.sh N     <span class="token comment"># 启动容器指定 N - 1 个从节点</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="hadoop-客户端节点"><a href="#hadoop-客户端节点" class="header-anchor">#</a> Hadoop 客户端节点</h2> <div class="language-sh hadoop-client.sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># 为了集群安全，一般情况下，不直接通过集群中任意节点去操作整个集群，通过配置客户端节点操作集群</span>
<span class="token comment"># 只要在配置 slave 的时候，不要把客户端添加到 slave 里，</span>
<span class="token comment"># 即客户端和 hadoop 集群其他的节点配置是一摸一样的，但不参与运算</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> container <span class="token function">ls</span> -a -q -f <span class="token assign-left variable">name</span><span class="token operator">=</span>xzx-hadoop-client <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> /dev/null<span class="token variable">)</span></span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token comment"># 没有找到 hadoop 客户端容器节点：xzx-hadoop-client，则创建客户端节点</span>
    <span class="token function">docker</span> run -itd --restart<span class="token operator">=</span>always --net<span class="token operator">=</span>xzx-hadoop-bridge --privileged <span class="token punctuation">\</span>
            -P <span class="token punctuation">\</span>
            --name xzx-hadoop-client <span class="token punctuation">\</span>
            --hostname xzx-hadoop-client <span class="token punctuation">\</span>
            xzx/hadoop-3.2.2 <span class="token punctuation">\</span>
            /bin/bash
<span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> inspect --format <span class="token string">'{{.State.Running}}'</span> xzx-hadoop-client<span class="token variable">)</span></span> <span class="token operator">==</span> <span class="token boolean">true</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token comment"># hadoop 客户端容器节点处于运行状态，无需重启</span>
    <span class="token builtin class-name">echo</span> xzx-hadoop-client running <span class="token punctuation">..</span>.
<span class="token keyword">else</span>
    <span class="token comment"># 重启客户端节点</span>
    <span class="token function">docker</span> start xzx-hadoop-client
    <span class="token builtin class-name">echo</span> xzx-hadoop-client started and running <span class="token punctuation">..</span>.
<span class="token keyword">fi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># Hadoop 客户端连接集群验证</span>
<span class="token punctuation">[</span>xzx@xzx hadoop-docker<span class="token punctuation">]</span>$ <span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it xzx-hadoop-client hdfs dfs -ls /
Found <span class="token number">3</span> items
drwxr-xr-x   - root supergroup          <span class="token number">0</span> <span class="token number">2021</span>-07-15 <span class="token number">10</span>:50 /jobTests
drwxr-xr-x   - root supergroup          <span class="token number">0</span> <span class="token number">2021</span>-07-15 <span class="token number">10</span>:53 /out
drwxrwx---   - root supergroup          <span class="token number">0</span> <span class="token number">2021</span>-07-15 <span class="token number">10</span>:52 /tmp
<span class="token punctuation">[</span>xzx@xzx hadoop-docker<span class="token punctuation">]</span>$ <span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it xzx-hadoop-client hadoop version
Hadoop <span class="token number">3.2</span>.2
Source code repository Unknown -r 7a3bc90b05f257c8ace2f76d74264906f0f7a932
Compiled by hexiaoqiao on <span class="token number">2021</span>-01-03T09:26Z
Compiled with protoc <span class="token number">2.5</span>.0
From <span class="token builtin class-name">source</span> with checksum 5a8f564f46624254b27f6a33126ff4
This <span class="token builtin class-name">command</span> was run using /usr/local/hadoop-3.2.2/share/hadoop/common/hadoop-common-3.2.2.jar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h1 id="cdh"><a href="#cdh" class="header-anchor">#</a> CDH</h1> <h1 id="hdfs-ha"><a href="#hdfs-ha" class="header-anchor">#</a> HDFS HA</h1> <h1 id="代码仓库"><a href="#代码仓库" class="header-anchor">#</a> 代码仓库</h1> <p>代码仓库：<a href="https://gitee.com/fouxian/hadoop-docker" target="_blank" rel="noopener noreferrer">hadoop-docker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>xzx@xzx hadoop-docker<span class="token punctuation">]</span>$ <span class="token function">git</span> config --global user.name <span class="token string">&quot;xzx&quot;</span>
<span class="token punctuation">[</span>xzx@xzx hadoop-docker<span class="token punctuation">]</span>$ <span class="token function">git</span> config --global user.email xzx@163.com
<span class="token punctuation">[</span>xzx@xzx hadoop-docker<span class="token punctuation">]</span>$ <span class="token function">git</span> init   <span class="token comment"># 初始化本地仓库</span>
<span class="token comment"># 上传代码至本地仓库</span>
<span class="token punctuation">[</span>xzx@xzx hadoop-docker<span class="token punctuation">]</span>$ <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>  
<span class="token comment"># 忽略两个安装包</span>
<span class="token punctuation">[</span>xzx@xzx hadoop-docker<span class="token punctuation">]</span>$ <span class="token function">git</span> <span class="token function">rm</span> --cached xzx-jdk/jdk-8u271-linux-x64.tar.gz
<span class="token punctuation">[</span>xzx@xzx hadoop-docker<span class="token punctuation">]</span>$ <span class="token function">git</span> <span class="token function">rm</span> --cached xzx-hadoop-cluster/hadoop-3.2.2.tar.gz
<span class="token punctuation">[</span>xzx@xzx hadoop-docker<span class="token punctuation">]</span>$ <span class="token function">git</span> commit -m <span class="token string">&quot;Hadoop 分布式集群容器化部署&quot;</span>
<span class="token comment"># 提交代码至 Gitee 仓库</span>
<span class="token punctuation">[</span>xzx@xzx hadoop-docker<span class="token punctuation">]</span>$ <span class="token function">git</span> remote <span class="token function">add</span> origin https://gitee.com/xzx/hadoop-docker.git
<span class="token punctuation">[</span>xzx@xzx hadoop-docker<span class="token punctuation">]</span>$ <span class="token function">git</span> push -u origin master
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 注：仓库中包含 JDK 和 Hadoop 安装包，由于上传文件限制，故通过（.gitignore）该忽略安装包文件</span>
<span class="token punctuation">[</span>xzx@xzx hadoop-docker<span class="token punctuation">]</span>$ <span class="token function">touch</span> .gitignore
<span class="token punctuation">[</span>xzx@xzx hadoop-docker<span class="token punctuation">]</span>$ <span class="token function">vim</span> .gitignore
*.tar.gz
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h1 id="hdfs-shell"><a href="#hdfs-shell" class="header-anchor">#</a> HDFS Shell</h1> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># scheme：对于 HDFS 文件系统，scheme=hdfs；对于本地文件系统，scheme=file</span>
<span class="token comment"># authority：(ip:port)</span>
<span class="token comment"># scheme :// authority，指配置文件 core-site.xml 中的 fs.defaultFS 属性</span>
<span class="token comment"># path：具体文件路径</span>
bin/hdfs dfs -cmd<span class="token operator">&lt;</span>args<span class="token operator">&gt;</span> scheme :// authority / path
bin/hadoop fs -cmd<span class="token operator">&lt;</span>args<span class="token operator">&gt;</span> scheme :// authority / path
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="/images/kr/bigdata/hadoop/HDFS-Shell.jpg" alt="HDFS-Shell"></p> <h1 id="远程连接-docker-engine"><a href="#远程连接-docker-engine" class="header-anchor">#</a> 远程连接 Docker Engine</h1> <p>Docker 默认只接受本地客户端的请求，远程连接 Docker Engine 有两种连接方式：</p> <ul><li>TCP：在服务端开始 TCP 连接，此连接为不安全连接，数据通过明文进行传输，缺省端口 2375</li> <li>TCP_TLS：在 TCP 基础上加了 SSL 的安全证书，以保证连接安全，缺省端口 2376</li></ul> <h2 id="tcp-无认证连接"><a href="#tcp-无认证连接" class="header-anchor">#</a> TCP 无认证连接</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>xzx@xzx ~<span class="token punctuation">]</span>$ <span class="token function">vim</span> /usr/lib/systemd/system/docker.service             <span class="token comment"># 配置远程客户端连接 Docker Engine</span>
<span class="token comment"># 在该行最后增加 -H tcp://0.0.0.0:2375，表示不限制访问地址，启动 TCP 连接</span>
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/bin/dockerd -H fd:// --containerd<span class="token operator">=</span>/run/containerd/containerd.sock -H tcp://0.0.0.0:2375

<span class="token punctuation">[</span>xzx@xzx ~<span class="token punctuation">]</span>$ systemctl daemon-reload                            <span class="token comment"># 重载配置</span>
<span class="token punctuation">[</span>xzx@xzx ~<span class="token punctuation">]</span>$ systemctl restart <span class="token function">docker</span>                           <span class="token comment"># 重启 docker 服务</span>
<span class="token punctuation">[</span>xzx@xzx ~<span class="token punctuation">]</span>$ <span class="token function">netstat</span> -tnpl <span class="token operator">|</span> <span class="token function">grep</span> <span class="token number">2375</span>                          <span class="token comment"># 查看监听端口</span>
<span class="token punctuation">[</span>xzx@xzx ~<span class="token punctuation">]</span>$ firewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">2375</span>/tcp --permanent     <span class="token comment"># 开放防火墙端口，permanent：表示持久</span>
<span class="token punctuation">[</span>xzx@xzx ~<span class="token punctuation">]</span>$ firewall-cmd --zone<span class="token operator">=</span>public --remove-port<span class="token operator">=</span><span class="token number">2375</span>/tcp --permanent     <span class="token comment"># 关闭防火墙端口，permanent：表示持久</span>
<span class="token punctuation">[</span>xzx@xzx ~<span class="token punctuation">]</span>$ firewall-cmd --reload                              <span class="token comment"># 重启防火墙</span>
<span class="token punctuation">[</span>xzx@xzx ~<span class="token punctuation">]</span>$ <span class="token function">docker</span> -H tcp://192.168.120.159:2375 version       <span class="token comment"># 远程连接 Docker 并执行命令 version</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><img src="/images/kr/bigdata/hadoop/Docker-TCP.png" alt="Docker-TCP"></p> <h2 id="tcp-tls-认证连接"><a href="#tcp-tls-认证连接" class="header-anchor">#</a> TCP_TLS 认证连接</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>xzx@xzx docker-tls<span class="token punctuation">]</span>$ ./docker-tls.sh                        <span class="token comment"># 生成 CA 等证书文件</span>
<span class="token punctuation">[</span>xzx@xzx docker-tls<span class="token punctuation">]</span>$ ll
total <span class="token number">32</span>
-r--------. <span class="token number">1</span> xzx xzx <span class="token number">3326</span> Jul <span class="token number">10</span> <span class="token number">23</span>:54 ca-key.pem          <span class="token comment"># CA 密钥</span>
-r--r--r--. <span class="token number">1</span> xzx xzx <span class="token number">1996</span> Jul <span class="token number">10</span> <span class="token number">23</span>:54 ca.pem              <span class="token comment"># CA 证书</span>
-r--r--r--. <span class="token number">1</span> xzx xzx <span class="token number">1842</span> Jul <span class="token number">10</span> <span class="token number">23</span>:54 client-cert.pem     <span class="token comment"># 客户端证书</span>
-r--------. <span class="token number">1</span> xzx xzx <span class="token number">3247</span> Jul <span class="token number">10</span> <span class="token number">23</span>:54 client-key.pem      <span class="token comment"># 客户端密钥</span>
-rwx------. <span class="token number">1</span> xzx xzx <span class="token number">2097</span> Jul <span class="token number">10</span> <span class="token number">23</span>:54 docker-tls.sh       <span class="token comment"># 生成脚本</span>
-r--r--r--. <span class="token number">1</span> xzx xzx <span class="token number">1854</span> Jul <span class="token number">10</span> <span class="token number">23</span>:54 server-cert.pem     <span class="token comment"># 服务端证书</span>
-r--------. <span class="token number">1</span> xzx xzx <span class="token number">3243</span> Jul <span class="token number">10</span> <span class="token number">23</span>:54 server-key.pem      <span class="token comment"># 服务端密钥</span>
<span class="token comment"># 配置 TCP_TLS</span>
<span class="token punctuation">[</span>xzx@xzx ~<span class="token punctuation">]</span>$ <span class="token function">vim</span> /usr/lib/systemd/system/docker.service
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/bin/dockerd -H fd:// --containerd<span class="token operator">=</span>/run/containerd/containerd.sock <span class="token punctuation">\</span>
        --tlsverify <span class="token punctuation">\</span>
        --tlscacert<span class="token operator">=</span>/home/xzx/Work/hadoop-docker/docker-tls/ca.pem <span class="token punctuation">\</span>
        --tlscert<span class="token operator">=</span>/home/xzx/Work/hadoop-docker/docker-tls/server-cert.pem <span class="token punctuation">\</span>
        --tlskey<span class="token operator">=</span>/home/xzx/Work/hadoop-docker/docker-tls/server-key.pem <span class="token punctuation">\</span>
        -H tcp://0.0.0.0:2376
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 客户端配置，从服务端下载证书到客户端，需要重命名文件</span>
<span class="token function">scp</span> xzx@192.168.120.159:/home/xzx/Work/hadoop-docker/docker-tls/ca.pem ./ca.pem
<span class="token function">scp</span> xzx@192.168.120.159:/home/xzx/Work/hadoop-docker/docker-tls/client-cert.pem ./cert.pem
<span class="token function">scp</span> xzx@192.168.120.159:/home/xzx/Work/hadoop-docker/docker-tls/client-key.pem ./key.pem
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="/images/kr/bigdata/hadoop/Docker-TCP-TLS.png" alt="Docker-TCP-TLS"></p> <h1 id="容器时间修改"><a href="#容器时间修改" class="header-anchor">#</a> 容器时间修改</h1> <p>宿主机使用 CST(China Standard Time) 而 Docker 容器使用 UTC(Coordinated Universal Time)，那么两者就会相差 8 小时，修改容器时间方式：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">TZ</span><span class="token operator">=</span>Asia/Shanghai  <span class="token comment"># 直接进入容器修改时区</span>
<span class="token comment"># 更新软链接</span>
<span class="token punctuation">[</span>root@dmcdw-3 etc<span class="token punctuation">]</span><span class="token comment"># date</span>
Sun Sep <span class="token number">26</span> <span class="token number">22</span>:09:10 UTC <span class="token number">2021</span>
<span class="token punctuation">[</span>root@dmcdw-3 etc<span class="token punctuation">]</span><span class="token comment"># ll /etc/localtime</span>
lrwxrwxrwx. <span class="token number">1</span> root root <span class="token number">25</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> /etc/localtime -<span class="token operator">&gt;</span> <span class="token punctuation">..</span>/usr/share/zoneinfo/UTC
<span class="token punctuation">[</span>root@dmcdw-3 etc<span class="token punctuation">]</span><span class="token comment"># ln -snf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime        # 更新软连接</span>
<span class="token punctuation">[</span>root@dmcdw-3 etc<span class="token punctuation">]</span><span class="token comment"># ll /etc/localtime</span>
lrwxrwxrwx. <span class="token number">1</span> root root <span class="token number">33</span> Sep <span class="token number">27</span> 06:02 /etc/localtime -<span class="token operator">&gt;</span> /usr/share/zoneinfo/Asia/Shanghai
<span class="token punctuation">[</span>root@dmcdw-3 etc<span class="token punctuation">]</span><span class="token comment"># date</span>
Mon Sep <span class="token number">27</span> 06:07:24 CST <span class="token number">2021</span>
<span class="token comment"># docker run 创建容器时挂载宿主机 localtime 文件到容器内</span>
<span class="token function">docker</span> run --name <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span> -v /etc/localtime:/etc/localtime:ro
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">2022/6/8</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/kr/bigdata/hadoop/分布式文件系统-HDFS-体系架构及原理.html">
          分布式文件系统 HDFS 体系架构及原理
        </a>
        →
      </span></p></div> </main></div> <aside class="page-sidebar"> <div class="page-side-toolbar"><div class="option-box-toc-fixed"><div class="toc-container-sidebar"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:650px"><div style="font-weight:bold;text-align:center;">Hadoop概述及分布式集群容器化部署</div> <hr> <div class="toc-box"><ul class="toc-sidebar-links"><li><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#大数据定义" class="toc-sidebar-link">大数据定义</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#hadoop-概述" class="toc-sidebar-link">Hadoop 概述</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#hadoop-1-x-2-x-3-x" class="toc-sidebar-link">Hadoop 1.x/2.x/3.x</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#cloudrea-hadoop-cdh" class="toc-sidebar-link">Cloudrea Hadoop（CDH）</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#hadoop-生态圈" class="toc-sidebar-link">Hadoop 生态圈</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#ssh-远程登录" class="toc-sidebar-link">SSH 远程登录</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#ssh-远程密码登录" class="toc-sidebar-link">SSH 远程密码登录</a></li><li class="toc-sidebar-sub-header"><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#ssh-远程免密登录-公钥登录" class="toc-sidebar-link">SSH 远程免密登录（公钥登录）</a></li></ul></li><li><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#hadoop-安装模式" class="toc-sidebar-link">Hadoop 安装模式</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#hadoop-集群节点" class="toc-sidebar-link">Hadoop 集群节点</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#分布式集群容器化部署" class="toc-sidebar-link">分布式集群容器化部署</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#镜像构建" class="toc-sidebar-link">镜像构建</a></li><li class="toc-sidebar-sub-header"><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#集群搭建" class="toc-sidebar-link">集群搭建</a></li></ul></li><li><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#hadoop-客户端节点" class="toc-sidebar-link">Hadoop 客户端节点</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#tcp-无认证连接" class="toc-sidebar-link">TCP 无认证连接</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#tcp-tls-认证连接" class="toc-sidebar-link">TCP_TLS 认证连接</a><ul class="toc-sidebar-sub-headers"></ul></li></ul></div></div></div></div></div> <div class="option-box-toc-over"><img src="/images/system/toc.png" class="nozoom"> <span class="show-txt">目录</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:550px"><div style="font-weight:bold;text-align:center;">Hadoop概述及分布式集群容器化部署</div> <hr> <div class="toc-box"><ul class="toc-sidebar-links"><li><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#大数据定义" class="toc-sidebar-link">大数据定义</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#hadoop-概述" class="toc-sidebar-link">Hadoop 概述</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#hadoop-1-x-2-x-3-x" class="toc-sidebar-link">Hadoop 1.x/2.x/3.x</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#cloudrea-hadoop-cdh" class="toc-sidebar-link">Cloudrea Hadoop（CDH）</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#hadoop-生态圈" class="toc-sidebar-link">Hadoop 生态圈</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#ssh-远程登录" class="toc-sidebar-link">SSH 远程登录</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#ssh-远程密码登录" class="toc-sidebar-link">SSH 远程密码登录</a></li><li class="toc-sidebar-sub-header"><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#ssh-远程免密登录-公钥登录" class="toc-sidebar-link">SSH 远程免密登录（公钥登录）</a></li></ul></li><li><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#hadoop-安装模式" class="toc-sidebar-link">Hadoop 安装模式</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#hadoop-集群节点" class="toc-sidebar-link">Hadoop 集群节点</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#分布式集群容器化部署" class="toc-sidebar-link">分布式集群容器化部署</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#镜像构建" class="toc-sidebar-link">镜像构建</a></li><li class="toc-sidebar-sub-header"><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#集群搭建" class="toc-sidebar-link">集群搭建</a></li></ul></li><li><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#hadoop-客户端节点" class="toc-sidebar-link">Hadoop 客户端节点</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#tcp-无认证连接" class="toc-sidebar-link">TCP 无认证连接</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/kr/bigdata/hadoop/Hadoop-%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2.html#tcp-tls-认证连接" class="toc-sidebar-link">TCP_TLS 认证连接</a><ul class="toc-sidebar-sub-headers"></ul></li></ul></div></div></div></div></div></div>  </aside></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.cfd60917.js" defer></script><script src="/assets/js/4.8234885e.js" defer></script><script src="/assets/js/3.1429892b.js" defer></script><script src="/assets/js/19.c00af7cb.js" defer></script>
  </body>
</html>
